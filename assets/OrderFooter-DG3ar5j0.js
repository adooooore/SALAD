import{s as k,h as e,u as q,j as g,k as j,_ as B,i as F,T as M,o as J,r as P,a as d,c as m,b as a,d as x,w as S,f as C,t as c,q as _,U as A,e as l,F as G,p as N,g as $,W as U}from"./index-BjjV7tyl.js";const D=k("cartStore",()=>{const o=e([]);q();const r=g(()=>o.value.reduce((t,s)=>t+Math.ceil(s.quantity*s.calories),0)),n=g(()=>o.value.reduce((t,s)=>t+Math.ceil(s.quantity*s.carbs),0)),i=g(()=>o.value.reduce((t,s)=>t+Math.ceil(s.quantity*s.protein),0)),p=g(()=>o.value.reduce((t,s)=>t+Math.ceil(s.quantity*s.fat),0)),u=t=>{o.value.push(t),h()},v=t=>{const s=o.value.findIndex(y=>y.name===t.name);s!==-1&&o.value.splice(s,1),h()},b=t=>{const s=o.value.findIndex(y=>y.name===t.name);Math.ceil(t.quantity*t.calories),s===-1?u({...t,quantity:t.quantity||1}):v(t)},h=()=>{localStorage.setItem("totalCalories",r.value),localStorage.setItem("totalCarbs",n.value),localStorage.setItem("totalProtein",i.value),localStorage.setItem("totalFat",p.value),localStorage.setItem("selectedIngredients",JSON.stringify(o.value.map(t=>({name:t.name,quantity:t.quantity,carbs:t.carbs,protein:t.protein,fat:t.fat,calories:t.calories,category:t.category}))))},w=()=>{const t=JSON.parse(localStorage.getItem("selectedIngredients"));t&&(o.value=t.map(s=>({...s,quantity:e(s.quantity),more:e(!1)})))};return j(o,()=>{h()},{deep:!0}),{selectedIngredients:o,totalCalories:r,totalCarbs:n,totalProtein:i,totalFat:p,addIngredient:u,removeIngredient:v,toggleIngredient:b,loadFromLocalStorage:w}}),W=k("ingredients",()=>{const o=e([{name:"파프리카",image:"menu1.png",weight:50,calories:10,carbs:2.35,protein:.45,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"토마토",image:"menu2-1.png",weight:50,calories:9,carbs:2.7,protein:.4,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"양상추",image:"menu3.png",weight:50,calories:7.5,carbs:1.45,protein:.7,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"샐러리",image:"menu4.png",weight:50,calories:8,carbs:1.8,protein:.35,fat:.05,quantity:e(0),more:e(!1),category:"vege"},{name:"당근",image:"menu5.png",weight:50,calories:20.5,carbs:5,protein:.45,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"할라피뇨",image:"menu6.png",weight:50,calories:15.5,carbs:3.7,protein:.7,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"아보카도",image:"menu8.png",weight:50,calories:80,carbs:4,protein:1,fat:7,quantity:e(0),more:e(!1),category:"vege"},{name:"단호박",image:"menu9.png",weight:50,calories:22.5,carbs:6,protein:.5,fat:.05,quantity:e(0),more:e(!1),category:"vege"},{name:"브로콜리",image:"menu10.png",weight:50,calories:17,carbs:3.3,protein:1.4,fat:.2,quantity:e(0),more:e(!1),category:"vege"},{name:"스위트 콘",image:"menu11.png",weight:50,calories:43,carbs:9.5,protein:1.5,fat:.6,quantity:e(0),more:e(!1),category:"vege"},{name:"적양파",image:"menu7.png",weight:50,calories:20,carbs:4.65,protein:.45,fat:.05,quantity:e(0),more:e(!1),category:"vege"},{name:"바나나",image:"menu13.png",weight:50,calories:45,carbs:11.5,protein:.55,fat:.15,quantity:e(0),more:e(!1),category:"vege"},{name:"사과",image:"menu14.png",weight:50,calories:25,carbs:6,protein:.5,fat:.1,quantity:e(0),more:e(!1),category:"vege"},{name:"망고",image:"menu15.png",weight:50,calories:29,carbs:7.2,protein:.4,fat:.15,quantity:e(0),more:e(!1),category:"vege"}]),r=D();return{ingredients:o,toggleIngredient:i=>{r.toggleIngredient(i)}}}),E=k("navigation",{state:()=>({pages:["/","/orderSelect","/orderSelectSub","/orderDressing","/orderFinal","/orderSheet","/payment"],currentPageIndex:0}),actions:{goToNextPage(){this.currentPageIndex<this.pages.length-1&&this.currentPageIndex++},goToPreviousPage(){this.currentPageIndex>0&&this.currentPageIndex--},getCurrentPage(){return this.pages[this.currentPageIndex]}}}),f=o=>(N("data-v-429a58ef"),o=o(),$(),o),K={style:{position:"fixed",width:"100%",top:"0",left:"0",padding:"0 20px","background-color":"#fff","z-index":"200","max-width":"480px"}},Q={class:"GNB"},X={class:"title"},Y={key:0,style:{display:"flex","align-items":"center","justify-content":"center","margin-top":"18px"}},Z=f(()=>a("img",{src:U,alt:"salad",style:{width:"150px",height:"150px"}},null,-1)),ee=[Z],te=f(()=>a("h5",null,"칼로리 계산하기",-1)),ae={key:2,class:"txtBox"},oe={style:{"margin-top":"12px",display:"flex","align-items":"center"}},se={key:3,style:{display:"flex","flex-direction":"column","align-items":"center","margin-bottom":"24px",padding:"0 32px"}},re={key:0,style:{color:"green",display:"flex","align-items":"center",gap:"4px","margin-left":"-4px"}},ne=f(()=>a("h5",{style:{color:"green"}},"목표 한 끼 칼로리를 충족했어요!",-1)),le={key:4,class:"caloriesDate"},ce={class:"dateBox"},ie=f(()=>a("h5",{class:"dateBoxTitle"},"탄수화물",-1)),ue={class:"date"},de={style:{color:"#111"}},ge={class:"dateBox"},pe=f(()=>a("h5",{class:"dateBoxTitle"},"단백질",-1)),me={class:"date"},he={style:{color:"#111"}},_e={class:"dateBox"},ve=f(()=>a("h5",{class:"dateBoxTitle"},"지방",-1)),fe={class:"date"},ye={style:{color:"#111"}},xe={__name:"OrderHeader",setup(o){const r=q();W();const n=D(),i=F(),p=M(),u=e(!1),v=E(),b=q(),h=g(()=>!!b.perMealCalories),w={"/orderSelect":"STEP.1","/orderSelectSub":"STEP.2","/orderDressing":"STEP.3","/orderFinal":"STEP.4","/orderSheet":"주문서","/payment":"결제완료"},t=g(()=>w[p.path]||1),s=()=>{u.value=!u.value},y=()=>{i.push("/")},T=g(()=>!["/orderSheet","/payment"].includes(p.path)),V=g(()=>!["/orderSelect","/orderSelectSub","/orderDressing","/orderSheet","/payment"].includes(p.path)),O=g(()=>r.perMealCalories===0?0:n.totalCalories/r.perMealCalories*100);J(()=>{r.loadFromLocalStorage()});const R=()=>{v.goToPreviousPage(),i.push(v.getCurrentPage())};return(Te,Be)=>{const I=P("v-icon"),z=P("RouterLink"),H=P("v-progress-linear");return d(),m(G,null,[a("div",K,[a("div",Q,[x(I,{onClick:R},{default:S(()=>[C("mdi-arrow-left")]),_:1}),a("h2",X,c(t.value),1),x(I,{onClick:y},{default:S(()=>[C("mdi-close")]),_:1})])]),V.value?(d(),m("div",Y,ee)):_("",!0),h.value?_("",!0):(d(),A(z,{key:1,to:"/targetCaloriesInput",class:"btn"},{default:S(()=>[te]),_:1})),h.value&&T.value?(d(),m("div",ae,[a("h1",null,c(l(n).totalCalories)+" kcal",1),a("span",oe,[a("h4",null,"/ "+c(l(r).perMealCalories)+"kcal",1),x(I,{onClick:s},{default:S(()=>[C(c(u.value?"mdi-menu-up":"mdi-menu-down"),1)]),_:1})])])):_("",!0),h.value&&T.value?(d(),m("div",se,[x(H,{"model-value":O.value,color:"green",class:"progress"},null,8,["model-value"]),l(n).totalCalories>=l(r).perMealCalories?(d(),m("div",re,[x(I,{style:{"font-size":"20px","margin-bottom":"4px"}},{default:S(()=>[C("mdi-check")]),_:1}),ne])):_("",!0)])):_("",!0),u.value?(d(),m("div",le,[a("div",ce,[ie,a("div",ue,[a("h5",de,c(l(n).totalCarbs)+"g ",1),a("h5",null,"/ "+c(l(r).carbs)+"g",1)])]),a("div",ge,[pe,a("div",me,[a("h5",he,c(l(n).totalProtein)+"g ",1),a("h5",null,"/ "+c(l(r).protein)+"g",1)])]),a("div",_e,[ve,a("div",fe,[a("h5",ye,c(l(n).totalFat)+"g ",1),a("h5",null," / "+c(l(r).fat)+"g",1)])])])):_("",!0)],64)}}},Me=B(xe,[["__scopeId","data-v-429a58ef"]]),L=o=>(N("data-v-41c14ad0"),o=o(),$(),o),Se={style:{padding:"12px 20px  38px 20px",width:"100%","background-color":"#fff","z-index":"100",display:"flex","flex-direction":"column",gap:"18px"}},be={key:0,class:"inputBox"},Ie=L(()=>a("h5",null,"총 결제금액",-1)),Ce=[Ie],we={class:"btnBox"},Pe=L(()=>a("h4",null,"이전으로",-1)),qe=[Pe],ke={__name:"OrderFooter",setup(o){const r=E(),n=F(),i=M(),p=()=>{r.goToPreviousPage(),n.push(r.getCurrentPage())},u=()=>{r.goToNextPage(),n.push(r.getCurrentPage())};return(v,b)=>(d(),m("div",Se,[l(i).path==="/orderFinal"?(d(),m("div",be,Ce)):_("",!0),a("div",we,[a("div",{class:"btn",onClick:p},qe),a("div",{class:"btn",style:{"background-color":"#52CA19"},onClick:u},[a("h4",null,c(l(i).path==="/orderSheet"?"결제하기":"다음으로"),1)])])]))}},Ne=B(ke,[["__scopeId","data-v-41c14ad0"]]);export{Ne as a,W as b,Me as o,D as u};
